(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();class D{static create(e=16){const i=new D(e);return new Proxy(i,{get(a,s){return typeof s=="string"&&/^\d+$/.test(s)?a.get(parseInt(s)):a[s]}})}constructor(e=16){this.initialCapacity=e,this._capacity=e,this._buffer=new Array(e).fill(null),this._head=Math.floor(e/2),this._tail=this._head-1,this.length=0}prepend(e){return this._head===0&&this._resize(),this._buffer[--this._head]=e,++this.length}append(e){return this._tail===this._capacity-1&&this._resize(),this._buffer[++this._tail]=e,++this.length}pop(){if(this.length===0)return;const e=this._buffer[this._tail];return this._buffer[this._tail]=null,this._tail--,this.length--,e}get(e){if(!(e<0||e>=this.length))return this._buffer[this._head+e]}set(e,i){return e<0||e>=this.length?!1:(this._buffer[this._head+e]=i,!0)}clear(){const e=this.initialCapacity;this._capacity=e,this._buffer=new Array(e).fill(null),this._head=Math.floor(e/2),this._tail=this._head-1,this.length=0}_resize(){const e=this._capacity*2,i=new Array(e).fill(null),a=Math.floor((e-this.length)/2);for(let s=0;s<this.length;s++)i[a+s]=this._buffer[this._head+s];this._buffer=i,this._head=a,this._tail=this._head+this.length-1,this._capacity=e}[Symbol.iterator](){let e=0;const i=this;return{next(){return e<i.length?{value:i.get(e++),done:!1}:{done:!0}}}}forEach(e){for(let i=0;i<this.length;i++)e(this.get(i),i)}map(e){const i=D.create(this.length);for(let a=0;a<this.length;a++)i.append(e(this.get(a),a));return i}filter(e){const i=D.create(this.length);for(let a=0;a<this.length;a++){const s=this.get(a);e(s,a)&&i.append(s)}return i}}const Z=D.create;let X=null,L=null;function V(n){const e=()=>{L&&(L(),L=null),X=e;const i=n();return L=typeof i=="function"?i:null,X=null,i};return e()}function tt(n){let e=n;const i=new Set,a=new Map;return{get value(){return X&&i.add(X),e},set value(s){O(s,e)||(e=s,i.forEach(o=>{const c=a.get(o);c&&c();const u=o();typeof u=="function"?a.set(o,u):a.delete(o)}))},subscribe(s){i.add(s);const o=s();return typeof o=="function"&&a.set(s,o),()=>{i.delete(s);const c=a.get(s);c&&(c(),a.delete(s))}}}}function O(n,e){if(n===e)return!0;if(n==null||e==null||typeof n!="object"||typeof e!="object")return!1;if(Array.isArray(n)&&Array.isArray(e))return n.length!==e.length?!1:n.every((s,o)=>O(s,e[o]));if(Array.isArray(n)!==Array.isArray(e))return!1;const i=Object.keys(n),a=Object.keys(e);return i.length!==a.length?!1:i.every(s=>Object.prototype.hasOwnProperty.call(e,s)&&O(n[s],e[s]))}const et=[[100,107],[99,107],[100,110],[100,115],[101,126],[101,138],[101,151],[101,163],[102,175],[102,190],[102,203],[101,216],[100,226],[98,236],[95,247],[92,258],[87,270],[82,281],[77,291],[73,299],[68,305],[63,309],[58,313],[53,316],[49,317],[45,316],[42,314],[39,310],[36,304],[34,296],[32,288],[32,281],[33,275],[34,269],[37,263],[41,257],[45,251],[51,247],[56,243],[61,241],[66,239],[71,237],[77,236],[82,237],[87,238],[93,239],[98,241],[104,242],[109,243],[115,245],[121,246],[126,246],[131,246],[136,245],[141,242],[146,238],[152,232],[157,225],[162,217],[166,209],[170,201],[175,192],[180,182],[184,173],[187,164],[189,156],[190,149],[192,141],[193,135],[194,130],[193,126],[192,124],[191,122],[190,122],[189,124],[188,126],[187,129],[185,133],[183,139],[181,147],[177,157],[174,166],[171,174],[169,181],[167,189],[165,198],[163,206],[161,213],[159,220],[158,227],[157,234],[156,241],[155,249],[154,255],[153,260],[153,263],[153,268],[152,273],[151,279],[150,284],[149,289],[149,292],[149,296],[148,301],[147,306],[147,310],[147,314],[147,317],[147,319],[147,322],[147,326],[147,330],[147,332],[147,333],[147,333],[147,332],[148,329],[149,325],[151,319],[154,313],[158,306],[162,301],[165,297],[168,295],[172,292],[176,290],[180,288],[185,286],[190,284],[196,282],[202,280],[208,279],[214,278],[220,277],[226,276],[231,275],[236,273],[240,271],[243,268],[246,266],[246,263],[246,260],[244,256],[241,251],[236,246],[229,242],[221,241],[214,242],[208,245],[203,248],[197,253],[193,259],[190,266],[189,274],[188,282],[188,290],[189,298],[191,306],[194,313],[198,318],[202,321],[207,322],[212,323],[217,322],[223,320],[230,316],[237,311],[244,305],[251,298],[259,290],[268,281],[277,272],[285,263],[292,254],[299,246],[305,239],[310,232],[315,225],[320,217],[326,210],[331,203],[335,197],[340,190],[344,183],[348,176],[351,171],[353,166],[355,161],[356,157],[356,154],[355,151],[353,149],[351,147],[347,146],[343,145],[339,144],[335,145],[331,146],[327,148],[323,151],[320,155],[316,160],[312,166],[309,172],[307,178],[304,184],[301,192],[298,200],[295,209],[293,218],[290,227],[287,236],[285,244],[283,253],[281,260],[280,267],[279,275],[279,283],[280,290],[281,295],[282,300],[285,304],[288,307],[291,309],[295,310],[300,311],[304,312],[309,312],[314,311],[319,309],[324,305],[330,301],[336,297],[342,292],[350,286],[358,279],[366,271],[373,264],[380,255],[388,246],[396,236],[402,227],[408,218],[414,210],[419,202],[423,194],[426,186],[430,177],[432,168],[434,160],[433,155],[432,152],[430,149],[428,148],[425,147],[422,147],[418,148],[415,150],[412,153],[409,157],[406,163],[402,169],[398,177],[395,185],[392,194],[389,203],[385,212],[382,221],[379,230],[376,238],[373,247],[371,256],[370,265],[369,272],[369,280],[369,287],[369,294],[370,299],[372,304],[374,308],[377,312],[380,314],[384,315],[388,316],[393,316],[398,315],[403,314],[407,312],[412,308],[417,304],[421,300],[425,295],[429,290],[433,285],[438,278],[443,272],[448,265],[451,259],[455,253],[460,246],[464,240],[467,235],[468,232],[468,231],[468,230],[468,230],[467,231],[466,234],[464,238],[462,245],[459,254],[457,264],[456,272],[456,279],[457,287],[458,294],[460,299],[463,303],[467,305],[471,306],[476,306],[481,305],[486,303],[491,301],[496,298],[502,294],[506,289],[510,284],[512,278],[513,272],[513,265],[513,258],[512,251],[510,243],[505,237],[499,233],[493,230],[486,228],[481,227],[476,227],[472,228],[469,230],[467,232],[466,234],[466,236],[466,239],[467,243],[469,246],[472,248],[476,250],[481,251],[487,251],[492,250],[499,248],[505,245],[511,241]],nt=localStorage.getItem("pathCoordinates"),it=n=>{try{return JSON.parse(n)}catch(e){return console.error("Error parsing coordinates from localStorage:",e),null}},st=it(nt)??et,q=tt(st);function at(){const n=document.getElementById("animation-canvas"),e=n.getContext("2d"),i=document.getElementById("animation-canvas-container"),a=document.getElementById("fullScreenBtn"),s=document.getElementById("exit-fullscreen-icon"),o=document.getElementById("enter-fullscreen-icon");a.addEventListener("click",function(){s.classList.toggle("hidden"),o.classList.toggle("hidden"),i.classList.toggle("fullscreen"),requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))})}),V(()=>{const u=q.value;return c(u)});function c(u){let x=1/0,Y=-1/0,_=1/0,R=-1/0;u.forEach(r=>{r[0]<x&&(x=r[0]),r[0]>Y&&(Y=r[0]),r[1]<_&&(_=r[1]),r[1]>R&&(R=r[1])});const F=Y-x,T=R-_,$=x+F/2,K=_+T/2,U=u.map(r=>({re:r[0],im:r[1]}));function G(r){const l=r.length,p=[];for(let P=0;P<l;P++){let g=0,d=0;for(let f=0;f<l;f++){const w=2*Math.PI*P*f/l;g+=r[f].re*Math.cos(w)+r[f].im*Math.sin(w),d+=-r[f].re*Math.sin(w)+r[f].im*Math.cos(w)}g/=l,d/=l;const C=P,S=Math.hypot(g,d),h=Math.atan2(d,g);p.push({re:g,im:d,freq:C,amp:S,phase:h})}return p}let y=G(U);y.sort((r,l)=>l.amp-r.amp);let v=0;const Q=2*Math.PI/y.length;let m=Z(y.length),I=null;function A(){I&&cancelAnimationFrame(I);const r=i.clientWidth,l=Math.min(r*(2/3),window.innerHeight);n.style.width=r+"px",n.style.height=l+"px";const p=window.devicePixelRatio||1;n.width=r*p,n.height=l*p,e.resetTransform(),e.scale(p,p),m.clear(),v=0,I=requestAnimationFrame(W)}function W(){const r=parseFloat(n.style.width)||n.width,l=parseFloat(n.style.height)||n.height;e.save(),e.resetTransform(),e.fillStyle="#111",e.fillRect(0,0,n.width,n.height),e.restore(),e.save();const p=r/F,P=l/T,g=Math.min(p,P)*.9;e.translate(r/2,l/2),e.scale(g,g),e.translate(-$,-K);let d=0,C=0;const S=1;for(let h=0;h<y.length;h++){let f=d,w=C;const b=y[h].freq,k=y[h].amp,z=y[h].phase;d+=k*Math.cos(b*v+z),C+=k*Math.sin(b*v+z),e.strokeStyle="rgba(255, 255, 255, 0.3)",e.lineWidth=S/g,e.beginPath(),e.arc(f,w,k,0,2*Math.PI),e.stroke(),e.strokeStyle="#fff",e.lineWidth=S/g,e.beginPath(),e.moveTo(f,w),e.lineTo(d,C),e.stroke()}if(m.prepend({x:d,y:C}),e.beginPath(),m.length>0){e.moveTo(m[0].x,m[0].y);for(let h=1;h<m.length;h++)e.lineTo(m[h].x,m[h].y);e.strokeStyle="#ff4081",e.lineWidth=S*2/g,e.stroke()}e.restore(),v+=Q,v>=2*Math.PI&&(v=v%(2*Math.PI),m.clear()),I=requestAnimationFrame(W)}return window.addEventListener("resize",A),A(),()=>{window.removeEventListener("resize",A),I&&cancelAnimationFrame(I)}}}const t={canvas:null,ctx:null,canvasContainer:null,startBtn:null,clearBtn:null,animatePathBtn:null,statusElem:null,confirmImageBtn:null,isDrawing:!1,isRecording:!1,pathCoordinates:[],currentImage:null,imagePosition:{x:0,y:0},imageScale:1,isPositioningImage:!1,isDraggingImage:!1,dragStart:{x:0,y:0},lastPinchDistance:0,mouseX:0,mouseY:0,ticking:!1};function ot(){rt(),ct(),lt(),j(),E("Ready to draw.")}function rt(){t.canvas=document.getElementById("drawing-canvas"),t.ctx=t.canvas.getContext("2d"),t.canvasContainer=document.getElementById("drawing-canvas-container"),t.startBtn=document.getElementById("startBtn"),t.clearBtn=document.getElementById("clearBtn"),t.animatePathBtn=document.getElementById("animateBtn"),t.statusElem=document.getElementById("status"),t.confirmImageBtn=document.getElementById("confirmImageBtn")}function ct(){t.ctx.lineWidth=3,t.ctx.lineCap="round",t.ctx.lineJoin="round",t.ctx.strokeStyle="#000000"}function lt(){t.startBtn.addEventListener("click",ut),t.clearBtn.addEventListener("click",H),t.animatePathBtn.addEventListener("click",dt),t.confirmImageBtn.addEventListener("click",ft),t.canvas.addEventListener("mousedown",mt),t.canvas.addEventListener("mousemove",pt),t.canvas.addEventListener("mouseup",yt),t.canvas.addEventListener("mouseout",N),t.canvas.addEventListener("wheel",vt),t.canvas.addEventListener("touchstart",wt),t.canvas.addEventListener("touchmove",xt),t.canvas.addEventListener("touchend",It),window.addEventListener("resize",j)}function E(n){t.statusElem.textContent=n}function ut(){t.isRecording?(t.isRecording=!1,t.startBtn.textContent="Start Drawing",E(`Drawing completed! Recorded ${t.pathCoordinates.length} points.`),navigator.clipboard.writeText(JSON.stringify(J(t.pathCoordinates))).catch(n=>{console.error("Failed to copy: ",n)})):(t.isRecording=!0,t.pathCoordinates=[],t.startBtn.textContent="Stop Drawing",E("Recording your drawing..."))}function ht(n){if(n.preventDefault(),!t.isRecording||t.isPositioningImage)return;t.isDrawing=!0;const e=M(n);t.ctx.beginPath(),t.ctx.moveTo(e.x,e.y),t.pathCoordinates.push([Math.round(e.x),Math.round(e.y)])}function gt(n){n.preventDefault(),!(!t.isDrawing||!t.isRecording||t.isPositioningImage)&&(t.mouseX=n.clientX,t.mouseY=n.clientY,t.ticking||(window.requestAnimationFrame(()=>{const e=M({clientX:t.mouseX,clientY:t.mouseY});t.ctx.lineWidth=2,t.ctx.lineTo(e.x,e.y),t.ctx.stroke(),t.pathCoordinates.push([Math.round(e.x),Math.round(e.y)]),t.ticking=!1}),t.ticking=!0))}function N(){t.isDrawing=!1}function H(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.pathCoordinates=[],t.isRecording=!1,t.currentImage=null,t.startBtn.textContent="Start Drawing",t.startBtn.disabled=!1,t.confirmImageBtn.style.display="none",E("Canvas cleared. Ready to draw.")}function j(){const n=t.canvasContainer.clientWidth,e=n*(2/3);t.canvas.style.width=n+"px",t.canvas.style.height=e+"px";const i=window.devicePixelRatio||1;t.canvas.width=n*i,t.canvas.height=e*i,t.ctx.resetTransform(),t.ctx.scale(i,i),t.currentImage&&B()}function dt(){if(t.pathCoordinates.length===0){E("No path coordinates to animate. Please draw something first!");return}const n=J(t.pathCoordinates);q.value=n,localStorage.setItem("pathCoordinates",JSON.stringify(n)),H()}function J(n){if(!n||n.length<3)return n?[...n]:[];const e=[],i=n.length;e.push([...n[0]]);for(let a=1;a<i-1;a++){const s=n[a-1],o=n[a],c=n[a+1],u=(s[0]+o[0]+c[0])/3,x=(s[1]+o[1]+c[1])/3;e.push([Math.round(u),Math.round(x)])}return e.push([...n[i-1]]),e}async function ft(){t.isPositioningImage=!1,t.confirmImageBtn.style.display="none",t.startBtn.disabled=!1,E("Image set! Click Start Drawing to trace over it."),B()}function B(){if(t.currentImage&&(t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.save(),t.ctx.drawImage(t.currentImage,t.imagePosition.x,t.imagePosition.y,t.currentImage.width*t.imageScale,t.currentImage.height*t.imageScale),t.ctx.restore(),!t.isPositioningImage&&t.pathCoordinates.length>1)){t.ctx.beginPath(),t.ctx.moveTo(t.pathCoordinates[0][0],t.pathCoordinates[0][1]);for(let n=1;n<t.pathCoordinates.length;n++)t.ctx.lineTo(t.pathCoordinates[n][0],t.pathCoordinates[n][1]);t.ctx.stroke()}}function M(n){const e=t.canvas.getBoundingClientRect();return{x:n.clientX-e.left,y:n.clientY-e.top}}function mt(n){t.isPositioningImage&&t.currentImage?(n.preventDefault(),t.isDraggingImage=!0,t.dragStart=M(n)):ht(n)}function pt(n){if(t.isPositioningImage&&t.isDraggingImage){n.preventDefault();const e=M(n),i=e.x-t.dragStart.x,a=e.y-t.dragStart.y;t.imagePosition.x+=i,t.imagePosition.y+=a,t.dragStart=e,B()}else gt(n)}function yt(n){t.isDraggingImage?t.isDraggingImage=!1:N()}function vt(n){if(t.isPositioningImage&&t.currentImage){n.preventDefault();const e=M(n),i=n.deltaY<0?1.1:.9,a=t.imageScale*i;a>.1&&a<5&&(t.imagePosition.x=e.x-(e.x-t.imagePosition.x)*i,t.imagePosition.y=e.y-(e.y-t.imagePosition.y)*i,t.imageScale=a,B())}}function wt(n){if(n.preventDefault(),t.isPositioningImage&&t.currentImage){if(n.touches.length===1)t.isDraggingImage=!0,t.dragStart={x:n.touches[0].clientX-t.canvas.getBoundingClientRect().left,y:n.touches[0].clientY-t.canvas.getBoundingClientRect().top};else if(n.touches.length===2){t.isDraggingImage=!1;const e={x:n.touches[0].clientX,y:n.touches[0].clientY},i={x:n.touches[1].clientX,y:n.touches[1].clientY};t.lastPinchDistance=Math.hypot(e.x-i.x,e.y-i.y)}}else if(n.touches.length===1){const e=n.touches[0],i=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});t.canvas.dispatchEvent(i)}}function xt(n){if(n.preventDefault(),t.isPositioningImage&&t.currentImage){if(n.touches.length===1&&t.isDraggingImage){const e={x:n.touches[0].clientX-t.canvas.getBoundingClientRect().left,y:n.touches[0].clientY-t.canvas.getBoundingClientRect().top},i=e.x-t.dragStart.x,a=e.y-t.dragStart.y;t.imagePosition.x+=i,t.imagePosition.y+=a,t.dragStart=e,B()}else if(n.touches.length===2){const e={x:n.touches[0].clientX,y:n.touches[0].clientY},i={x:n.touches[1].clientX,y:n.touches[1].clientY},a=Math.hypot(e.x-i.x,e.y-i.y);if(t.lastPinchDistance>0){const s=a/t.lastPinchDistance,o=t.imageScale*s,c=(e.x+i.x)/2-t.canvas.getBoundingClientRect().left,u=(e.y+i.y)/2-t.canvas.getBoundingClientRect().top;o>.1&&o<5&&(t.imagePosition.x=c-(c-t.imagePosition.x)*s,t.imagePosition.y=u-(u-t.imagePosition.y)*s,t.imageScale=o,B())}t.lastPinchDistance=a}}else if(n.touches.length===1){const e=n.touches[0],i=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});t.canvas.dispatchEvent(i)}}function It(n){if(n.preventDefault(),t.isDraggingImage)t.isDraggingImage=!1;else if(!t.isPositioningImage){const e=new MouseEvent("mouseup");t.canvas.dispatchEvent(e)}t.lastPinchDistance=0}document.addEventListener("DOMContentLoaded",function(){ot(),at()});
