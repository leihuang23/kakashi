(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();class b{static create(t=16){const i=new b(t);return new Proxy(i,{get(a,s){return typeof s=="string"&&/^\d+$/.test(s)?a.get(parseInt(s)):a[s]}})}constructor(t=16){this.initialCapacity=t,this._capacity=t,this._buffer=new Array(t).fill(null),this._head=Math.floor(t/2),this._tail=this._head-1,this.length=0}prepend(t){return this._head===0&&this._resize(),this._buffer[--this._head]=t,++this.length}append(t){return this._tail===this._capacity-1&&this._resize(),this._buffer[++this._tail]=t,++this.length}pop(){if(this.length===0)return;const t=this._buffer[this._tail];return this._buffer[this._tail]=null,this._tail--,this.length--,t}get(t){if(!(t<0||t>=this.length))return this._buffer[this._head+t]}set(t,i){return t<0||t>=this.length?!1:(this._buffer[this._head+t]=i,!0)}clear(){const t=this.initialCapacity;this._capacity=t,this._buffer=new Array(t).fill(null),this._head=Math.floor(t/2),this._tail=this._head-1,this.length=0}_resize(){const t=this._capacity*2,i=new Array(t).fill(null),a=Math.floor((t-this.length)/2);for(let s=0;s<this.length;s++)i[a+s]=this._buffer[this._head+s];this._buffer=i,this._head=a,this._tail=this._head+this.length-1,this._capacity=t}[Symbol.iterator](){let t=0;const i=this;return{next(){return t<i.length?{value:i.get(t++),done:!1}:{done:!0}}}}forEach(t){for(let i=0;i<this.length;i++)t(this.get(i),i)}map(t){const i=b.create(this.length);for(let a=0;a<this.length;a++)i.append(t(this.get(a),a));return i}filter(t){const i=b.create(this.length);for(let a=0;a<this.length;a++){const s=this.get(a);t(s,a)&&i.append(s)}return i}}const gt=b.create;class G{constructor(){this.queue=[],this.seen=new Set}add(t,i=0){if(this.seen.has(t)||t.flags&DISPOSED)return;this.seen.add(t);let a=this.queue.length;for(;a>0&&this.queue[a-1].priority>i;)a--;this.queue.splice(a,0,{computation:t,priority:i})}next(){return this.queue.length===0?null:this.queue.shift().computation}get isEmpty(){return this.queue.length===0}clear(){this.queue.length=0,this.seen.clear()}}function ft(n){const t=new Set,i=new Set,a=[];function s(o){if(t.has(o)||i.has(o))return;i.add(o);const r=o.deps.values();let c;for(;!(c=r.next()).done;){const u=c.value;u.owner&&u.owner!==o&&s(u.owner)}i.delete(o),t.add(o),a.push(o)}for(let o=0;o<n.length;o++)s(n[o]);return a}function dt(n,t){t.add(n),n.deps.add(t)}function tt(n){var t,i;const a=n.deps;if(!a.size)return;const s=a.values();let o;for(;!(o=s.next()).done;)(i=(t=o.value)==null?void 0:t.delete)==null||i.call(t,n);a.clear()}let B=null,I=null,E=null,mt=null;const P=[],Q={},pt=50,W=[],N=1,L=2,Z=8,v=16,vt=32;let g=!1;function R(){return W.pop()||{}}function X(n){if(!(W.length>=pt)){for(const t in n)delete n[t];W.push(n)}}function p(n,t,i){var a;if(!g&&!((a=Q[n])!=null&&a.length))return t;const s=Q[n];if(s!=null&&s.length)for(let r=0;r<s.length;r++)try{t=s[r](n,t,i)??t}catch(c){console.error(`[tiny-signal] Type middleware error in "${n}":`,c)}if(!g)return t;const o=P.length;for(let r=0;r<o;r++)try{t=P[r](n,t,i)??t}catch(c){console.error(`[tiny-signal] Middleware error in "${n}" at index ${r}:`,c)}return t}function et(n){if(I)return n();const t=new G,i=new G;I=[],E=[];let a;try{if(a=n(),I.length>0){const s=ft(I);for(let o=0;o<s.length;o++){const r=s[o];r.flags&v||(r.flags&L?t.add(r,1):i.add(r,0))}if(!mt)for(;!t.isEmpty;)q(t.next())}for(;!i.isEmpty;)q(i.next());if(E.length>0)for(let s=0;s<E.length;s++){const o=E[s];o.flags&v||q(o)}return t.clear(),i.clear(),E=null,I=null,a}catch(s){throw t.clear(),i.clear(),I=null,E=null,s}}function q(n){if(n.flags&v||!(n.flags&N))return n.value;n.flags|=Z,n.flags&=-2,tt(n);const t=B;B=n;try{const i=g?R():null;g&&(i.computation=n,i.isUser=!!(n.flags&L),p("beforeCompute",null,i));let a=n.fn();if(g){i.result=a;const s=p("compute",a,i);s!==void 0&&(a=s),X(i)}return n.value=a,n.flags&=~Z,a}catch(i){throw n.flags|=vt,n.flags&=-9,console.error("[tiny-signal] Computation error:",i),i}finally{if(B=t,g){const i=R();i.computation=n,i.isUser=!!(n.flags&L),p("afterCompute",null,i),X(i)}}}function yt(n,t){return{fn:n,flags:N|L,deps:new Set,value:void 0,execute(){if(!(this.flags&v))return q(this)},dispose(){this.flags&v||(tt(this),this.flags|=v)}}}function wt(n,t={}){let i=null;const a=g?{type:"signal",...t}:null;let s=g?p("init",n,a):n;function o(){return i||(i=new Set,i.owner=B),i}function r(){i&&i.clear(),i=null}return{get value(){return B&&dt(B,o()),g?p("get",s,a):s},peek(){return g?p("peek",s,a):s},set value(c){if(g){const u=R();Object.assign(u,a||{}),u.prevValue=s,c=p("set",c,u),X(u)}Object.is(s,c)||(s=c,!(!i||!i.size)&&et(()=>{const u=i.values();let l;for(;!(l=u.next()).done;)l=l.value,!(l.flags&v)&&(l.flags|=N,(l.flags&L?E:I).push(l))}))},dispose:r}}function xt(n){let t;const i=yt(()=>{if(g){const s=R();s.fn=n,p("beforeEffect",null,s),X(s)}t&&(t(),t=null);const a=n();if(typeof a=="function"&&(t=a),g){const s=R();s.fn=n,s.cleanup=t,p("afterEffect",null,s),X(s)}});return et(()=>i.execute()),{dispose:()=>{t&&t(),i.dispose()},get disposed(){return!!(i.flags&v)}}}function It(n,t){const i=Array.isArray(n)?n:[n];P.push(...i),g=P.length>0;let a=!1;return()=>{a||(a=!0,i.forEach(s=>{let o;for(;(o=P.indexOf(s))>-1;)P.splice(o,1)}),g=P.length>0)}}function Et(n={}){const{serialize:t=JSON.stringify,deserialize:i=JSON.parse}=n;return(a,s,o)=>{if(!o.persist)return s;const r=o.persist.key;if(!r)return s;const c=o.persist.serialize||t,u=o.persist.deserialize||i;if(a==="init"){try{const l=localStorage.getItem(r);if(l!=null)return u(l)}catch{}return s??o.persist.defaultValue}if(a==="set")try{localStorage.setItem(r,c(s))}catch{}return s}}const Pt=[[100,107],[99,107],[100,110],[100,115],[101,126],[101,138],[101,151],[101,163],[102,175],[102,190],[102,203],[101,216],[100,226],[98,236],[95,247],[92,258],[87,270],[82,281],[77,291],[73,299],[68,305],[63,309],[58,313],[53,316],[49,317],[45,316],[42,314],[39,310],[36,304],[34,296],[32,288],[32,281],[33,275],[34,269],[37,263],[41,257],[45,251],[51,247],[56,243],[61,241],[66,239],[71,237],[77,236],[82,237],[87,238],[93,239],[98,241],[104,242],[109,243],[115,245],[121,246],[126,246],[131,246],[136,245],[141,242],[146,238],[152,232],[157,225],[162,217],[166,209],[170,201],[175,192],[180,182],[184,173],[187,164],[189,156],[190,149],[192,141],[193,135],[194,130],[193,126],[192,124],[191,122],[190,122],[189,124],[188,126],[187,129],[185,133],[183,139],[181,147],[177,157],[174,166],[171,174],[169,181],[167,189],[165,198],[163,206],[161,213],[159,220],[158,227],[157,234],[156,241],[155,249],[154,255],[153,260],[153,263],[153,268],[152,273],[151,279],[150,284],[149,289],[149,292],[149,296],[148,301],[147,306],[147,310],[147,314],[147,317],[147,319],[147,322],[147,326],[147,330],[147,332],[147,333],[147,333],[147,332],[148,329],[149,325],[151,319],[154,313],[158,306],[162,301],[165,297],[168,295],[172,292],[176,290],[180,288],[185,286],[190,284],[196,282],[202,280],[208,279],[214,278],[220,277],[226,276],[231,275],[236,273],[240,271],[243,268],[246,266],[246,263],[246,260],[244,256],[241,251],[236,246],[229,242],[221,241],[214,242],[208,245],[203,248],[197,253],[193,259],[190,266],[189,274],[188,282],[188,290],[189,298],[191,306],[194,313],[198,318],[202,321],[207,322],[212,323],[217,322],[223,320],[230,316],[237,311],[244,305],[251,298],[259,290],[268,281],[277,272],[285,263],[292,254],[299,246],[305,239],[310,232],[315,225],[320,217],[326,210],[331,203],[335,197],[340,190],[344,183],[348,176],[351,171],[353,166],[355,161],[356,157],[356,154],[355,151],[353,149],[351,147],[347,146],[343,145],[339,144],[335,145],[331,146],[327,148],[323,151],[320,155],[316,160],[312,166],[309,172],[307,178],[304,184],[301,192],[298,200],[295,209],[293,218],[290,227],[287,236],[285,244],[283,253],[281,260],[280,267],[279,275],[279,283],[280,290],[281,295],[282,300],[285,304],[288,307],[291,309],[295,310],[300,311],[304,312],[309,312],[314,311],[319,309],[324,305],[330,301],[336,297],[342,292],[350,286],[358,279],[366,271],[373,264],[380,255],[388,246],[396,236],[402,227],[408,218],[414,210],[419,202],[423,194],[426,186],[430,177],[432,168],[434,160],[433,155],[432,152],[430,149],[428,148],[425,147],[422,147],[418,148],[415,150],[412,153],[409,157],[406,163],[402,169],[398,177],[395,185],[392,194],[389,203],[385,212],[382,221],[379,230],[376,238],[373,247],[371,256],[370,265],[369,272],[369,280],[369,287],[369,294],[370,299],[372,304],[374,308],[377,312],[380,314],[384,315],[388,316],[393,316],[398,315],[403,314],[407,312],[412,308],[417,304],[421,300],[425,295],[429,290],[433,285],[438,278],[443,272],[448,265],[451,259],[455,253],[460,246],[464,240],[467,235],[468,232],[468,231],[468,230],[468,230],[467,231],[466,234],[464,238],[462,245],[459,254],[457,264],[456,272],[456,279],[457,287],[458,294],[460,299],[463,303],[467,305],[471,306],[476,306],[481,305],[486,303],[491,301],[496,298],[502,294],[506,289],[510,284],[512,278],[513,272],[513,265],[513,258],[512,251],[510,243],[505,237],[499,233],[493,230],[486,228],[481,227],[476,227],[472,228],[469,230],[467,232],[466,234],[466,236],[466,239],[467,243],[469,246],[472,248],[476,250],[481,251],[487,251],[492,250],[499,248],[505,245],[511,241]];It(Et());const nt=wt(Pt,{persist:{key:"pathCoordinates"}});function Ct(n){const t=n.length,i=[];for(let a=0;a<t;a++){let s=0,o=0;for(let l=0;l<t;l++){const d=2*Math.PI*a*l/t;s+=n[l].re*Math.cos(d)+n[l].im*Math.sin(d),o+=-n[l].re*Math.sin(d)+n[l].im*Math.cos(d)}s/=t,o/=t;const r=a,c=Math.hypot(s,o),u=Math.atan2(o,s);i.push({re:s,im:o,freq:r,amp:c,phase:u})}return i}function St(){const n=document.getElementById("animation-canvas"),t=n.getContext("2d"),i=document.getElementById("animation-canvas-container"),a=document.getElementById("fullScreenBtn"),s=document.getElementById("exit-fullscreen-icon"),o=document.getElementById("enter-fullscreen-icon");xt(()=>{const c=nt.value;return r(c)}),a.addEventListener("click",function(){s.classList.toggle("hidden"),o.classList.toggle("hidden"),i.classList.toggle("fullscreen"),requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))})});function r(c){let u=1/0,l=-1/0,d=1/0,F=-1/0;c.forEach(h=>{h[0]<u&&(u=h[0]),h[0]>l&&(l=h[0]),h[1]<d&&(d=h[1]),h[1]>F&&(F=h[1])});const H=l-u,J=F-d,rt=u+H/2,ct=d+J/2,lt=c.map(h=>({re:h[0],im:h[1]}));let y=Ct(lt);y.sort((h,x)=>x.amp-h.amp);let w=0;const ut=2*Math.PI/y.length;let m=gt(y.length),C=null;function O(){C&&cancelAnimationFrame(C);const h=i.clientWidth,x=Math.min(h*(2/3),window.innerHeight);n.style.width=h+"px",n.style.height=x+"px";const S=window.devicePixelRatio||1;n.width=h*S,n.height=x*S,t.resetTransform(),t.scale(S,S),m.clear(),w=0,C=requestAnimationFrame($)}function $(){const h=parseFloat(n.style.width)||n.width,x=parseFloat(n.style.height)||n.height;t.save(),t.resetTransform(),t.fillStyle="#111",t.fillRect(0,0,n.width,n.height),t.restore(),t.save();const S=h/H,ht=x/J,_=Math.min(S,ht)*.9;t.translate(h/2,x/2),t.scale(_,_),t.translate(-rt,-ct);let k=0,z=0;const T=1;for(let f=0;f<y.length;f++){let U=k,V=z;const j=y[f].freq,A=y[f].amp,K=y[f].phase;k+=A*Math.cos(j*w+K),z+=A*Math.sin(j*w+K),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=T/_,t.beginPath(),t.arc(U,V,A,0,2*Math.PI),t.stroke(),t.strokeStyle="#fff",t.lineWidth=T/_,t.beginPath(),t.moveTo(U,V),t.lineTo(k,z),t.stroke()}if(m.prepend({x:k,y:z}),t.beginPath(),m.length>0){t.moveTo(m[0].x,m[0].y);for(let f=1;f<m.length;f++)t.lineTo(m[f].x,m[f].y);t.strokeStyle="#ff4081",t.lineWidth=T*2/_,t.stroke()}t.restore(),w+=ut,w>=2*Math.PI&&(w=w%(2*Math.PI),m.clear()),C=requestAnimationFrame($)}return window.addEventListener("resize",O),O(),()=>{window.removeEventListener("resize",O),C&&cancelAnimationFrame(C)}}}const e={canvas:null,ctx:null,canvasContainer:null,startBtn:null,clearBtn:null,animatePathBtn:null,statusElem:null,confirmImageBtn:null,isDrawing:!1,isRecording:!1,pathCoordinates:[],currentImage:null,imagePosition:{x:0,y:0},imageScale:1,isPositioningImage:!1,isDraggingImage:!1,dragStart:{x:0,y:0},lastPinchDistance:0,mouseX:0,mouseY:0,ticking:!1};function Bt(){Dt(),Mt(),_t(),at(),D("Ready to draw.")}function Dt(){e.canvas=document.getElementById("drawing-canvas"),e.ctx=e.canvas.getContext("2d"),e.canvasContainer=document.getElementById("drawing-canvas-container"),e.startBtn=document.getElementById("startBtn"),e.clearBtn=document.getElementById("clearBtn"),e.animatePathBtn=document.getElementById("animateBtn"),e.statusElem=document.getElementById("status"),e.confirmImageBtn=document.getElementById("confirmImageBtn")}function Mt(){e.ctx.lineWidth=3,e.ctx.lineCap="round",e.ctx.lineJoin="round",e.ctx.strokeStyle="#000000"}function _t(){e.startBtn.addEventListener("click",bt),e.clearBtn.addEventListener("click",st),e.animatePathBtn.addEventListener("click",Xt),e.confirmImageBtn.addEventListener("click",Yt),e.canvas.addEventListener("mousedown",kt),e.canvas.addEventListener("mousemove",zt),e.canvas.addEventListener("mouseup",qt),e.canvas.addEventListener("mouseout",it),e.canvas.addEventListener("wheel",Ft),e.canvas.addEventListener("touchstart",Ot),e.canvas.addEventListener("touchmove",Tt),e.canvas.addEventListener("touchend",At),window.addEventListener("resize",at)}function D(n){e.statusElem.textContent=n}function bt(){e.isRecording?(e.isRecording=!1,e.startBtn.textContent="Start Drawing",D(`Drawing completed! Recorded ${e.pathCoordinates.length} points.`),navigator.clipboard.writeText(JSON.stringify(ot(e.pathCoordinates))).catch(n=>{console.error("Failed to copy: ",n)})):(e.isRecording=!0,e.pathCoordinates=[],e.startBtn.textContent="Stop Drawing",D("Recording your drawing..."))}function Lt(n){if(n.preventDefault(),!e.isRecording||e.isPositioningImage)return;e.isDrawing=!0;const t=Y(n);e.ctx.beginPath(),e.ctx.moveTo(t.x,t.y),e.pathCoordinates.push([Math.round(t.x),Math.round(t.y)])}function Rt(n){n.preventDefault(),!(!e.isDrawing||!e.isRecording||e.isPositioningImage)&&(e.mouseX=n.clientX,e.mouseY=n.clientY,e.ticking||(window.requestAnimationFrame(()=>{const t=Y({clientX:e.mouseX,clientY:e.mouseY});e.ctx.lineWidth=2,e.ctx.lineTo(t.x,t.y),e.ctx.stroke(),e.pathCoordinates.push([Math.round(t.x),Math.round(t.y)]),e.ticking=!1}),e.ticking=!0))}function it(){e.isDrawing=!1}function st(){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.pathCoordinates=[],e.isRecording=!1,e.currentImage=null,e.startBtn.textContent="Start Drawing",e.startBtn.disabled=!1,e.confirmImageBtn.style.display="none",D("Canvas cleared. Ready to draw.")}function at(){const n=e.canvasContainer.clientWidth,t=n*(2/3);e.canvas.style.width=n+"px",e.canvas.style.height=t+"px";const i=window.devicePixelRatio||1;e.canvas.width=n*i,e.canvas.height=t*i,e.ctx.resetTransform(),e.ctx.scale(i,i),e.currentImage&&M()}function Xt(){if(e.pathCoordinates.length===0){D("No path coordinates to animate. Please draw something first!");return}nt.value=ot(e.pathCoordinates),st()}function ot(n){if(!n||n.length<3)return n?[...n]:[];const t=[],i=n.length;t.push([...n[0]]);for(let a=1;a<i-1;a++){const s=n[a-1],o=n[a],r=n[a+1],c=(s[0]+o[0]+r[0])/3,u=(s[1]+o[1]+r[1])/3;t.push([Math.round(c),Math.round(u)])}return t.push([...n[i-1]]),t}async function Yt(){e.isPositioningImage=!1,e.confirmImageBtn.style.display="none",e.startBtn.disabled=!1,D("Image set! Click Start Drawing to trace over it."),M()}function M(){if(e.currentImage&&(e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.save(),e.ctx.drawImage(e.currentImage,e.imagePosition.x,e.imagePosition.y,e.currentImage.width*e.imageScale,e.currentImage.height*e.imageScale),e.ctx.restore(),!e.isPositioningImage&&e.pathCoordinates.length>1)){e.ctx.beginPath(),e.ctx.moveTo(e.pathCoordinates[0][0],e.pathCoordinates[0][1]);for(let n=1;n<e.pathCoordinates.length;n++)e.ctx.lineTo(e.pathCoordinates[n][0],e.pathCoordinates[n][1]);e.ctx.stroke()}}function Y(n){const t=e.canvas.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}function kt(n){e.isPositioningImage&&e.currentImage?(n.preventDefault(),e.isDraggingImage=!0,e.dragStart=Y(n)):Lt(n)}function zt(n){if(e.isPositioningImage&&e.isDraggingImage){n.preventDefault();const t=Y(n),i=t.x-e.dragStart.x,a=t.y-e.dragStart.y;e.imagePosition.x+=i,e.imagePosition.y+=a,e.dragStart=t,M()}else Rt(n)}function qt(n){e.isDraggingImage?e.isDraggingImage=!1:it()}function Ft(n){if(e.isPositioningImage&&e.currentImage){n.preventDefault();const t=Y(n),i=n.deltaY<0?1.1:.9,a=e.imageScale*i;a>.1&&a<5&&(e.imagePosition.x=t.x-(t.x-e.imagePosition.x)*i,e.imagePosition.y=t.y-(t.y-e.imagePosition.y)*i,e.imageScale=a,M())}}function Ot(n){if(n.preventDefault(),e.isPositioningImage&&e.currentImage){if(n.touches.length===1)e.isDraggingImage=!0,e.dragStart={x:n.touches[0].clientX-e.canvas.getBoundingClientRect().left,y:n.touches[0].clientY-e.canvas.getBoundingClientRect().top};else if(n.touches.length===2){e.isDraggingImage=!1;const t={x:n.touches[0].clientX,y:n.touches[0].clientY},i={x:n.touches[1].clientX,y:n.touches[1].clientY};e.lastPinchDistance=Math.hypot(t.x-i.x,t.y-i.y)}}else if(n.touches.length===1){const t=n.touches[0],i=new MouseEvent("mousedown",{clientX:t.clientX,clientY:t.clientY});e.canvas.dispatchEvent(i)}}function Tt(n){if(n.preventDefault(),e.isPositioningImage&&e.currentImage){if(n.touches.length===1&&e.isDraggingImage){const t={x:n.touches[0].clientX-e.canvas.getBoundingClientRect().left,y:n.touches[0].clientY-e.canvas.getBoundingClientRect().top},i=t.x-e.dragStart.x,a=t.y-e.dragStart.y;e.imagePosition.x+=i,e.imagePosition.y+=a,e.dragStart=t,M()}else if(n.touches.length===2){const t={x:n.touches[0].clientX,y:n.touches[0].clientY},i={x:n.touches[1].clientX,y:n.touches[1].clientY},a=Math.hypot(t.x-i.x,t.y-i.y);if(e.lastPinchDistance>0){const s=a/e.lastPinchDistance,o=e.imageScale*s,r=(t.x+i.x)/2-e.canvas.getBoundingClientRect().left,c=(t.y+i.y)/2-e.canvas.getBoundingClientRect().top;o>.1&&o<5&&(e.imagePosition.x=r-(r-e.imagePosition.x)*s,e.imagePosition.y=c-(c-e.imagePosition.y)*s,e.imageScale=o,M())}e.lastPinchDistance=a}}else if(n.touches.length===1){const t=n.touches[0],i=new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY});e.canvas.dispatchEvent(i)}}function At(n){if(n.preventDefault(),e.isDraggingImage)e.isDraggingImage=!1;else if(!e.isPositioningImage){const t=new MouseEvent("mouseup");e.canvas.dispatchEvent(t)}e.lastPinchDistance=0}document.addEventListener("DOMContentLoaded",function(){Bt(),St()});
