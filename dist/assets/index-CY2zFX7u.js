(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();class D{static create(e=16){const i=new D(e);return new Proxy(i,{get(s,a){return typeof a=="string"&&/^\d+$/.test(a)?s.get(parseInt(a)):s[a]}})}constructor(e=16){this.initialCapacity=e,this._capacity=e,this._buffer=new Array(e).fill(null),this._head=Math.floor(e/2),this._tail=this._head-1,this.length=0}prepend(e){return this._head===0&&this._resize(),this._buffer[--this._head]=e,++this.length}append(e){return this._tail===this._capacity-1&&this._resize(),this._buffer[++this._tail]=e,++this.length}pop(){if(this.length===0)return;const e=this._buffer[this._tail];return this._buffer[this._tail]=null,this._tail--,this.length--,e}get(e){if(!(e<0||e>=this.length))return this._buffer[this._head+e]}set(e,i){return e<0||e>=this.length?!1:(this._buffer[this._head+e]=i,!0)}clear(){const e=this.initialCapacity;this._capacity=e,this._buffer=new Array(e).fill(null),this._head=Math.floor(e/2),this._tail=this._head-1,this.length=0}_resize(){const e=this._capacity*2,i=new Array(e).fill(null),s=Math.floor((e-this.length)/2);for(let a=0;a<this.length;a++)i[s+a]=this._buffer[this._head+a];this._buffer=i,this._head=s,this._tail=this._head+this.length-1,this._capacity=e}[Symbol.iterator](){let e=0;const i=this;return{next(){return e<i.length?{value:i.get(e++),done:!1}:{done:!0}}}}forEach(e){for(let i=0;i<this.length;i++)e(this.get(i),i)}map(e){const i=D.create(this.length);for(let s=0;s<this.length;s++)i.append(e(this.get(s),s));return i}filter(e){const i=D.create(this.length);for(let s=0;s<this.length;s++){const a=this.get(s);e(a,s)&&i.append(a)}return i}}const Z=D.create;let R=null,L=null;function V(n){const e=()=>{L&&(L(),L=null),R=e;const i=n();return L=typeof i=="function"?i:null,R=null,i};return e()}function tt(n){let e=n;const i=new Set,s=new Map;return{get value(){return R&&i.add(R),e},set value(a){F(a,e)||(e=a,i.forEach(o=>{const c=s.get(o);c&&c();const u=o();typeof u=="function"?s.set(o,u):s.delete(o)}))},subscribe(a){i.add(a);const o=a();return typeof o=="function"&&s.set(a,o),()=>{i.delete(a);const c=s.get(a);c&&(c(),s.delete(a))}}}}function F(n,e){if(n===e)return!0;if(n==null||e==null||typeof n!="object"||typeof e!="object")return!1;if(Array.isArray(n)&&Array.isArray(e))return n.length!==e.length?!1:n.every((a,o)=>F(a,e[o]));if(Array.isArray(n)!==Array.isArray(e))return!1;const i=Object.keys(n),s=Object.keys(e);return i.length!==s.length?!1:i.every(a=>Object.prototype.hasOwnProperty.call(e,a)&&F(n[a],e[a]))}const et=[[100,107],[99,107],[100,110],[100,115],[101,126],[101,138],[101,151],[101,163],[102,175],[102,190],[102,203],[101,216],[100,226],[98,236],[95,247],[92,258],[87,270],[82,281],[77,291],[73,299],[68,305],[63,309],[58,313],[53,316],[49,317],[45,316],[42,314],[39,310],[36,304],[34,296],[32,288],[32,281],[33,275],[34,269],[37,263],[41,257],[45,251],[51,247],[56,243],[61,241],[66,239],[71,237],[77,236],[82,237],[87,238],[93,239],[98,241],[104,242],[109,243],[115,245],[121,246],[126,246],[131,246],[136,245],[141,242],[146,238],[152,232],[157,225],[162,217],[166,209],[170,201],[175,192],[180,182],[184,173],[187,164],[189,156],[190,149],[192,141],[193,135],[194,130],[193,126],[192,124],[191,122],[190,122],[189,124],[188,126],[187,129],[185,133],[183,139],[181,147],[177,157],[174,166],[171,174],[169,181],[167,189],[165,198],[163,206],[161,213],[159,220],[158,227],[157,234],[156,241],[155,249],[154,255],[153,260],[153,263],[153,268],[152,273],[151,279],[150,284],[149,289],[149,292],[149,296],[148,301],[147,306],[147,310],[147,314],[147,317],[147,319],[147,322],[147,326],[147,330],[147,332],[147,333],[147,333],[147,332],[148,329],[149,325],[151,319],[154,313],[158,306],[162,301],[165,297],[168,295],[172,292],[176,290],[180,288],[185,286],[190,284],[196,282],[202,280],[208,279],[214,278],[220,277],[226,276],[231,275],[236,273],[240,271],[243,268],[246,266],[246,263],[246,260],[244,256],[241,251],[236,246],[229,242],[221,241],[214,242],[208,245],[203,248],[197,253],[193,259],[190,266],[189,274],[188,282],[188,290],[189,298],[191,306],[194,313],[198,318],[202,321],[207,322],[212,323],[217,322],[223,320],[230,316],[237,311],[244,305],[251,298],[259,290],[268,281],[277,272],[285,263],[292,254],[299,246],[305,239],[310,232],[315,225],[320,217],[326,210],[331,203],[335,197],[340,190],[344,183],[348,176],[351,171],[353,166],[355,161],[356,157],[356,154],[355,151],[353,149],[351,147],[347,146],[343,145],[339,144],[335,145],[331,146],[327,148],[323,151],[320,155],[316,160],[312,166],[309,172],[307,178],[304,184],[301,192],[298,200],[295,209],[293,218],[290,227],[287,236],[285,244],[283,253],[281,260],[280,267],[279,275],[279,283],[280,290],[281,295],[282,300],[285,304],[288,307],[291,309],[295,310],[300,311],[304,312],[309,312],[314,311],[319,309],[324,305],[330,301],[336,297],[342,292],[350,286],[358,279],[366,271],[373,264],[380,255],[388,246],[396,236],[402,227],[408,218],[414,210],[419,202],[423,194],[426,186],[430,177],[432,168],[434,160],[433,155],[432,152],[430,149],[428,148],[425,147],[422,147],[418,148],[415,150],[412,153],[409,157],[406,163],[402,169],[398,177],[395,185],[392,194],[389,203],[385,212],[382,221],[379,230],[376,238],[373,247],[371,256],[370,265],[369,272],[369,280],[369,287],[369,294],[370,299],[372,304],[374,308],[377,312],[380,314],[384,315],[388,316],[393,316],[398,315],[403,314],[407,312],[412,308],[417,304],[421,300],[425,295],[429,290],[433,285],[438,278],[443,272],[448,265],[451,259],[455,253],[460,246],[464,240],[467,235],[468,232],[468,231],[468,230],[468,230],[467,231],[466,234],[464,238],[462,245],[459,254],[457,264],[456,272],[456,279],[457,287],[458,294],[460,299],[463,303],[467,305],[471,306],[476,306],[481,305],[486,303],[491,301],[496,298],[502,294],[506,289],[510,284],[512,278],[513,272],[513,265],[513,258],[512,251],[510,243],[505,237],[499,233],[493,230],[486,228],[481,227],[476,227],[472,228],[469,230],[467,232],[466,234],[466,236],[466,239],[467,243],[469,246],[472,248],[476,250],[481,251],[487,251],[492,250],[499,248],[505,245],[511,241]],nt=localStorage.getItem("pathCoordinates"),it=n=>{try{return JSON.parse(n)}catch(e){return console.error("Error parsing coordinates from localStorage:",e),null}},at=it(nt)??et,N=tt(at);function st(){const n=document.getElementById("animation-canvas"),e=n.getContext("2d"),i=document.getElementById("animation-canvas-container"),s=document.getElementById("fullScreenBtn"),a=document.getElementById("exit-fullscreen-icon"),o=document.getElementById("enter-fullscreen-icon");s.addEventListener("click",function(){a.classList.toggle("hidden"),o.classList.toggle("hidden"),i.classList.toggle("fullscreen"),requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))})}),V(()=>{const u=N.value;return c(u)});function c(u){let P=1/0,Y=-1/0,_=1/0,X=-1/0;u.forEach(r=>{r[0]<P&&(P=r[0]),r[0]>Y&&(Y=r[0]),r[1]<_&&(_=r[1]),r[1]>X&&(X=r[1])});const T=Y-P,b=X-_,J=P+T/2,$=_+b/2,K=u.map(r=>({re:r[0],im:r[1]}));function G(r){const l=r.length,p=[];for(let B=0;B<l;B++){let h=0,g=0;for(let f=0;f<l;f++){const w=2*Math.PI*B*f/l;h+=r[f].re*Math.cos(w)+r[f].im*Math.sin(w),g+=-r[f].re*Math.sin(w)+r[f].im*Math.cos(w)}h/=l,g/=l;const C=B,S=Math.hypot(h,g),d=Math.atan2(g,h);p.push({re:h,im:g,freq:C,amp:S,phase:d})}return p}let v=G(K);v.sort((r,l)=>l.amp-r.amp);let y=0;const Q=2*Math.PI/v.length;let m=Z(v.length),E=null;function A(){E&&cancelAnimationFrame(E);const r=i.clientWidth,l=Math.min(r*(2/3),window.innerHeight);n.style.width=r+"px",n.style.height=l+"px";const p=window.devicePixelRatio||1;n.width=r*p,n.height=l*p,e.resetTransform(),e.scale(p,p),m.clear(),y=0,E=requestAnimationFrame(W)}function W(){const r=parseFloat(n.style.width)||n.width,l=parseFloat(n.style.height)||n.height;e.save(),e.resetTransform(),e.fillStyle="#111",e.fillRect(0,0,n.width,n.height),e.restore(),e.save();const p=r/T,B=l/b,h=Math.min(p,B)*.9;e.translate(r/2,l/2),e.scale(h,h),e.translate(-J,-$);let g=0,C=0;const S=1;for(let d=0;d<v.length;d++){let f=g,w=C;const z=v[d].freq,k=v[d].amp,q=v[d].phase;g+=k*Math.cos(z*y+q),C+=k*Math.sin(z*y+q),e.strokeStyle="rgba(255, 255, 255, 0.3)",e.lineWidth=S/h,e.beginPath(),e.arc(f,w,k,0,2*Math.PI),e.stroke(),e.strokeStyle="#fff",e.lineWidth=S/h,e.beginPath(),e.moveTo(f,w),e.lineTo(g,C),e.stroke()}if(m.prepend({x:g,y:C}),e.beginPath(),m.length>0){e.moveTo(m[0].x,m[0].y);for(let d=1;d<m.length;d++)e.lineTo(m[d].x,m[d].y);e.strokeStyle="#ff4081",e.lineWidth=S*2/h,e.stroke()}e.restore(),y+=Q,y>=2*Math.PI&&(y=y%(2*Math.PI),m.clear()),E=requestAnimationFrame(W)}return window.addEventListener("resize",A),A(),()=>{window.removeEventListener("resize",A),E&&cancelAnimationFrame(E)}}}const t={canvas:null,ctx:null,canvasContainer:null,startBtn:null,clearBtn:null,animatePathBtn:null,statusElem:null,uploadImageBtn:null,imageUpload:null,confirmImageBtn:null,isDrawing:!1,isRecording:!1,pathCoordinates:[],currentImage:null,imagePosition:{x:0,y:0},imageScale:1,isPositioningImage:!1,isDraggingImage:!1,dragStart:{x:0,y:0},lastPinchDistance:0,mouseX:0,mouseY:0,ticking:!1};function ot(){rt(),ct(),lt(),H(),I("Ready to draw. You can upload an image or start drawing.")}function rt(){t.canvas=document.getElementById("drawing-canvas"),t.ctx=t.canvas.getContext("2d"),t.canvasContainer=document.getElementById("drawing-canvas-container"),t.startBtn=document.getElementById("startBtn"),t.clearBtn=document.getElementById("clearBtn"),t.animatePathBtn=document.getElementById("animateBtn"),t.statusElem=document.getElementById("status"),t.uploadImageBtn=document.getElementById("uploadImageBtn"),t.imageUpload=document.getElementById("imageUpload"),t.confirmImageBtn=document.getElementById("confirmImageBtn")}function ct(){t.ctx.lineWidth=3,t.ctx.lineCap="round",t.ctx.lineJoin="round",t.ctx.strokeStyle="#000000"}function lt(){t.startBtn.addEventListener("click",ut),t.clearBtn.addEventListener("click",O),t.animatePathBtn.addEventListener("click",gt),t.uploadImageBtn.addEventListener("click",()=>t.imageUpload.click()),t.confirmImageBtn.addEventListener("click",pt),t.imageUpload.addEventListener("change",ft),t.canvas.addEventListener("mousedown",vt),t.canvas.addEventListener("mousemove",yt),t.canvas.addEventListener("mouseup",wt),t.canvas.addEventListener("mouseout",U),t.canvas.addEventListener("wheel",It),t.canvas.addEventListener("touchstart",xt),t.canvas.addEventListener("touchmove",Pt),t.canvas.addEventListener("touchend",Et),window.addEventListener("resize",H)}function I(n){t.statusElem.textContent=n}function ut(){t.isRecording?(t.isRecording=!1,t.startBtn.textContent="Start Drawing",I(`Drawing completed! Recorded ${t.pathCoordinates.length} points.`),navigator.clipboard.writeText(JSON.stringify(j(t.pathCoordinates))).catch(n=>{console.error("Failed to copy: ",n)})):(t.isRecording=!0,t.pathCoordinates=[],t.startBtn.textContent="Stop Drawing",I("Recording your drawing..."))}function dt(n){if(n.preventDefault(),!t.isRecording||t.isPositioningImage)return;t.isDrawing=!0;const e=M(n);t.ctx.beginPath(),t.ctx.moveTo(e.x,e.y),t.pathCoordinates.push([Math.round(e.x),Math.round(e.y)])}function ht(n){n.preventDefault(),!(!t.isDrawing||!t.isRecording||t.isPositioningImage)&&(t.mouseX=n.clientX,t.mouseY=n.clientY,t.ticking||(window.requestAnimationFrame(()=>{const e=M({clientX:t.mouseX,clientY:t.mouseY});t.ctx.lineWidth=2,t.ctx.lineTo(e.x,e.y),t.ctx.stroke(),t.pathCoordinates.push([Math.round(e.x),Math.round(e.y)]),t.ticking=!1}),t.ticking=!0))}function U(){t.isDrawing=!1}function O(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.pathCoordinates=[],t.isRecording=!1,t.currentImage=null,t.startBtn.textContent="Start Drawing",t.startBtn.disabled=!1,t.confirmImageBtn.style.display="none",I("Canvas cleared. Ready to draw.")}function H(){const n=t.canvasContainer.clientWidth,e=n*(2/3);t.canvas.style.width=n+"px",t.canvas.style.height=e+"px";const i=window.devicePixelRatio||1;t.canvas.width=n*i,t.canvas.height=e*i,t.ctx.resetTransform(),t.ctx.scale(i,i),t.currentImage&&x()}function gt(){if(t.pathCoordinates.length===0){I("No path coordinates to animate. Please draw something first!");return}const n=j(t.pathCoordinates);N.value=n,localStorage.setItem("pathCoordinates",JSON.stringify(n)),O()}function j(n){if(!n||n.length<3)return n?[...n]:[];const e=[],i=n.length;e.push([...n[0]]);for(let s=1;s<i-1;s++){const a=n[s-1],o=n[s],c=n[s+1],u=(a[0]+o[0]+c[0])/3,P=(a[1]+o[1]+c[1])/3;e.push([Math.round(u),Math.round(P)])}return e.push([...n[i-1]]),e}function ft(n){if(n.target.files&&n.target.files[0]){const e=new FileReader;e.onload=i=>{const s=new Image;s.onload=()=>{O();const a=Math.min(t.canvas.width/(s.width*window.devicePixelRatio),t.canvas.height/(s.height*window.devicePixelRatio))*.8;t.currentImage=s,t.imageScale=a,t.imagePosition={x:(t.canvas.width/window.devicePixelRatio-s.width*a)/2,y:(t.canvas.height/window.devicePixelRatio-s.height*a)/2},x(),mt()},s.src=i.target.result},e.readAsDataURL(n.target.files[0])}}function mt(){t.isPositioningImage=!0,t.confirmImageBtn.style.display="inline-block",t.startBtn.disabled=!0,I("Position the image and press Confirm when ready")}function pt(){t.isPositioningImage=!1,t.confirmImageBtn.style.display="none",t.startBtn.disabled=!1,I("Image set! Click Start Drawing to trace over it."),x()}function x(){if(t.currentImage&&(t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.save(),t.ctx.drawImage(t.currentImage,t.imagePosition.x,t.imagePosition.y,t.currentImage.width*t.imageScale,t.currentImage.height*t.imageScale),t.ctx.restore(),!t.isPositioningImage&&t.pathCoordinates.length>1)){t.ctx.beginPath(),t.ctx.moveTo(t.pathCoordinates[0][0],t.pathCoordinates[0][1]);for(let n=1;n<t.pathCoordinates.length;n++)t.ctx.lineTo(t.pathCoordinates[n][0],t.pathCoordinates[n][1]);t.ctx.stroke()}}function M(n){const e=t.canvas.getBoundingClientRect();return{x:n.clientX-e.left,y:n.clientY-e.top}}function vt(n){t.isPositioningImage&&t.currentImage?(n.preventDefault(),t.isDraggingImage=!0,t.dragStart=M(n)):dt(n)}function yt(n){if(t.isPositioningImage&&t.isDraggingImage){n.preventDefault();const e=M(n),i=e.x-t.dragStart.x,s=e.y-t.dragStart.y;t.imagePosition.x+=i,t.imagePosition.y+=s,t.dragStart=e,x()}else ht(n)}function wt(n){t.isDraggingImage?t.isDraggingImage=!1:U()}function It(n){if(t.isPositioningImage&&t.currentImage){n.preventDefault();const e=M(n),i=n.deltaY<0?1.1:.9,s=t.imageScale*i;s>.1&&s<5&&(t.imagePosition.x=e.x-(e.x-t.imagePosition.x)*i,t.imagePosition.y=e.y-(e.y-t.imagePosition.y)*i,t.imageScale=s,x())}}function xt(n){if(n.preventDefault(),t.isPositioningImage&&t.currentImage){if(n.touches.length===1)t.isDraggingImage=!0,t.dragStart={x:n.touches[0].clientX-t.canvas.getBoundingClientRect().left,y:n.touches[0].clientY-t.canvas.getBoundingClientRect().top};else if(n.touches.length===2){t.isDraggingImage=!1;const e={x:n.touches[0].clientX,y:n.touches[0].clientY},i={x:n.touches[1].clientX,y:n.touches[1].clientY};t.lastPinchDistance=Math.hypot(e.x-i.x,e.y-i.y)}}else if(n.touches.length===1){const e=n.touches[0],i=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});t.canvas.dispatchEvent(i)}}function Pt(n){if(n.preventDefault(),t.isPositioningImage&&t.currentImage){if(n.touches.length===1&&t.isDraggingImage){const e={x:n.touches[0].clientX-t.canvas.getBoundingClientRect().left,y:n.touches[0].clientY-t.canvas.getBoundingClientRect().top},i=e.x-t.dragStart.x,s=e.y-t.dragStart.y;t.imagePosition.x+=i,t.imagePosition.y+=s,t.dragStart=e,x()}else if(n.touches.length===2){const e={x:n.touches[0].clientX,y:n.touches[0].clientY},i={x:n.touches[1].clientX,y:n.touches[1].clientY},s=Math.hypot(e.x-i.x,e.y-i.y);if(t.lastPinchDistance>0){const a=s/t.lastPinchDistance,o=t.imageScale*a,c=(e.x+i.x)/2-t.canvas.getBoundingClientRect().left,u=(e.y+i.y)/2-t.canvas.getBoundingClientRect().top;o>.1&&o<5&&(t.imagePosition.x=c-(c-t.imagePosition.x)*a,t.imagePosition.y=u-(u-t.imagePosition.y)*a,t.imageScale=o,x())}t.lastPinchDistance=s}}else if(n.touches.length===1){const e=n.touches[0],i=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});t.canvas.dispatchEvent(i)}}function Et(n){if(n.preventDefault(),t.isDraggingImage)t.isDraggingImage=!1;else if(!t.isPositioningImage){const e=new MouseEvent("mouseup");t.canvas.dispatchEvent(e)}t.lastPinchDistance=0}document.addEventListener("DOMContentLoaded",function(){ot(),st()});
